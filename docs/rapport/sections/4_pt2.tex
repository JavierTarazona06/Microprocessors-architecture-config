\subsection{Q6 : état configuration de cache}

Dans cache.cfg, les paramètres par défaut sont 32 KB (32768 Bytes) de cache, 
64 B de bloc, associativité 2, et une technologie de 32 nm.

\subsection{Q7 : efficacité surfacique des caches L1}

\paragraph{Paramètres de référence (Tableau 12).}
Pour le Cortex A15, les caches \(I\)-L1 et \(D\)-L1 sont configurés en \(32\text{KB}/64/2\).
Pour le Cortex A7, les caches \(I\)-L1 et \(D\)-L1 sont configurés en \(32\text{KB}/32/2\).

\paragraph{Note de cohérence (technologie et unités).}
Les fichiers CACTI utilisés ici (\texttt{result\_L1\_A15.txt} et \texttt{result\_L1\_A7.txt}) sont calculés à \(32\ \text{nm}\)
(\texttt{Technology size (nm): 32}), alors que l'énoncé donne les surfaces totales des c\oe urs
(\(2\ \text{mm}^2\) pour A15 et \(0.45\ \text{mm}^2\) pour A7) à \(28\ \text{nm}\).
Pour être rigoureux, on normalise donc les surfaces de cache de \(32\ \text{nm}\) vers \(28\ \text{nm}\) avant de calculer les pourcentages.
Par ailleurs, la technologie s'exprime en \(\text{nm}\) (et non en \(\text{mm}\)).

\paragraph{Surface d'un cache L1 (sortie CACTI à 32 nm).}
On utilise la métrique \texttt{Cache height x width (mm)} :
\[
A_{L1} = \text{height} \times \text{width}.
\]

Pour A15 :
\[
A_{L1,A15}^{(1)} = 0.265667 \times 0.175632 = 0.046660\ \text{mm}^2.
\]

Pour A7 :
\[
A_{L1,A7}^{(1)} = 0.265667 \times 0.174962 = 0.046482\ \text{mm}^2.
\]

\paragraph{Surface totale des caches L1 à 32 nm (instructions + données).}
Comme il y a deux caches L1 par c\oe ur (\(I\)-L1 et \(D\)-L1) :
\[
A_{L1,\text{tot}} = 2 \times A_{L1}^{(1)}.
\]

\[
A_{L1,\text{tot},A15} = 0.093319\ \text{mm}^2,\quad
A_{L1,\text{tot},A7} = 0.092963\ \text{mm}^2.
\]

\paragraph{Normalisation des surfaces L1 de 32 nm vers 28 nm.}
En première approximation, la surface suit le carré du facteur de technologie :
\[
A_{28} = A_{32}\left(\frac{28}{32}\right)^2,
\qquad
\left(\frac{28}{32}\right)^2 = 0.765625.
\]
\[
A_{L1,\text{tot},A15}^{(28)} = 0.093319 \times 0.765625 = 0.071448\ \text{mm}^2,
\]
\[
A_{L1,\text{tot},A7}^{(28)} = 0.092963 \times 0.765625 = 0.071175\ \text{mm}^2.
\]

\paragraph{Part des L1 dans la surface totale des c\oe urs (base homogène 28 nm).}
Avec les surfaces globales données dans l'énoncé (\(2\ \text{mm}^2\) pour A15, \(0.45\ \text{mm}^2\) pour A7, à \(28\ \text{nm}\)) :
\[
\%L1 = \frac{A_{L1,\text{tot}}^{(28)}}{A_{\text{c\oe ur + L1}}}\times 100.
\]

\[
\%L1_{A15} = \frac{0.071448}{2}\times 100 = 3.572\%
\]
\[
\%L1_{A7} = \frac{0.071175}{0.45}\times 100 = 15.817\%.
\]

\paragraph{Taille des c\oe urs hors caches L1.}
\[
A_{\text{c\oe ur hors L1}} = A_{\text{c\oe ur + L1}} - A_{L1,\text{tot}}^{(28)}.
\]

\[
A_{\text{c\oe ur hors L1},A15} = 2 - 0.071448 = 1.928552\ \text{mm}^2,
\]
\[
A_{\text{c\oe ur hors L1},A7} = 0.45 - 0.071175 = 0.378825\ \text{mm}^2.
\]

\paragraph{Analyse.}
Les deux c\oe urs ont des surfaces de L1 très proches, y compris après normalisation à \(28\ \text{nm}\)
(\(\approx 0.071\ \text{mm}^2\) pour \(I\)-L1+\(D\)-L1 dans les deux cas).
L'impact relatif reste néanmoins très différent :
les L1 représentent une part modérée du A15 (\(\approx 3.57\%\)),
et une part nettement plus élevée du A7 (\(\approx 15.82\%\)).
Le même budget de cache pèse donc davantage dans un c\oe ur plus compact.

\subsection{Q8 : variation de la taille L1 et nouvelle surface totale (L2 inclus)}

\paragraph{Méthode.}
Nous faisons varier simultanément \(I\)-L1 et \(D\)-L1 dans les intervalles demandés :
\[
\text{A7}: \{1,2,4,8,16\}\ \text{KB},\qquad
\text{A15}: \{2,4,8,16,32\}\ \text{KB}.
\]
\textit{Note : un point A7 à \(32\ \text{KB}\) a été généré à titre hors consigne / additionnel
pour comparaison visuelle avec A15. Les résultats exigés pour Q8 côté A7 restent
strictement \(\{1,2,4,8,16\}\ \text{KB}\).}
Les surfaces de cache sont obtenues avec CACTI 6.5 (sorties à \(32\ \text{nm}\)), puis normalisées à \(28\ \text{nm}\) :
\[
A_{28}=A_{32}\left(\frac{28}{32}\right)^2.
\]
La surface totale demandée à Q8 est calculée par :
\[
A_{\text{total}}^{(28)} = A_{\text{c\oe ur hors L1}}^{(28)} + A_{L2}^{(28)} + A_{L1,I+D}^{(28)}.
\]
avec \(A_{\text{c\oe ur hors L1}}^{(28)}=1.928552\ \text{mm}^2\) (A15) et
\(A_{\text{c\oe ur hors L1}}^{(28)}=0.378825\ \text{mm}^2\) (A7), issus de Q7.

\paragraph{Résultats numériques (mm\(^2\))}

Elles sont normalisés à 28 nm

\begin{table}[H]
\centering
\scriptsize
\caption{Q8 -- Cortex A7 : surface L1 totale et nouvelle surface totale (L2 inclus).}
\begin{tabular}{|c|c|c|}
\hline
\textbf{L1 (KB)} & \(\mathbf{A_{L1,I+D}^{(28)}}\) & \(\mathbf{A_{\text{total}}^{(28)}}\) \\
\hline
1  & 0.007995 & 0.757841 \\
2  & 0.019817 & 0.769663 \\
4  & 0.011540 & 0.761386 \\
8  & 0.025437 & 0.775283 \\
16 & 0.038482 & 0.788329 \\
\hline
\end{tabular}
\end{table}

\begin{table}[H]
\centering
\scriptsize
\caption{Q8 -- Cortex A15 : surface L1 totale et nouvelle surface totale (L2 inclus).}
\begin{tabular}{|c|c|c|}
\hline
\textbf{L1 (KB)} & \(\mathbf{A_{L1,I+D}^{(28)}}\) & \(\mathbf{A_{\text{total}}^{(28)}}\) \\
\hline
2  & 0.019483 & 2.267949 \\
4  & 0.009264 & 2.257730 \\
8  & 0.025521 & 2.273987 \\
16 & 0.028377 & 2.276843 \\
32 & 0.071448 & 2.319914 \\
\hline
\end{tabular}
\end{table}

\paragraph{Graphes demandés.}

Deux graphes sont tracés :
\textit{si le point A7 \(32\ \text{KB}\) apparaît dans les figures, il est hors consigne / additionnel.}


\begin{figure}[H]
\centering
\includegraphics[width=0.95\linewidth]{../results/q8_surface/figures/q8_l1_total_area_vs_size_28nm.png}
\caption{Q8 -- Surface totale de L1 (\(I\)-L1+\(D\)-L1) en fonction de la taille L1.}
\end{figure}

\begin{figure}[H]
\centering
\includegraphics[width=0.95\linewidth]{../results/q8_surface/figures/q8_total_area_with_l2_vs_size_28nm.png}
\caption{Q8 -- Nouvelle surface totale (coeur hors L1 + L1 + L2) en fonction de la taille L1.}
\end{figure}

\paragraph{Analyse.}
L'augmentation de la taille L1 tend globalement à augmenter la surface totale, avec un décalage vertical dû à \(L2\) fixe
(\(512\ \text{KB}\)). Les courbes ne sont pas strictement monotones pour toutes les tailles intermédiaires
à cause des choix internes de floorplan/organisation CACTI (banques, mats, découpage), qui introduisent des paliers
et des réorganisations discrètes.
Malgré ces irrégularités locales, la tendance globale est claire :
des L1 plus grands impliquent une surface totale plus grande pour A7 comme pour A15.

\subsection{Q9 : efficacité surfacique (IPC/mm\(^2\))}

\paragraph{Définition.}
Pour chaque configuration de L1 et pour chaque application, nous calculons :
\[
\text{Efficacité surfacique}=\frac{IPC}{\text{surface totale (mm}^2\text{)}}.
\]
Les IPC proviennent des sweeps gem5 (Q4 pour A7 et Q5 pour A15) et les surfaces totales
proviennent de Q8 (\(A_{\text{total}}^{(28)}\), base homogène 28 nm).

\paragraph{Résultats -- Cortex A7.}
\begin{table}[H]
\centering
\scriptsize
\caption{Q9 -- A7 : IPC et efficacité surfacique (Dijkstra/Blowfish).}
\begin{tabular}{|c|c|c|c|c|c|}
\hline
\textbf{L1} & \(\mathbf{A_{\text{tot}}^{(28)}}\) & \(\mathbf{IPC_{Dij}}\) & \(\mathbf{SE_{Dij}}\) & \(\mathbf{IPC_{Bf}}\) & \(\mathbf{SE_{Bf}}\) \\
\textbf{(KB)} & \textbf{(mm\(^2\))} &  & \textbf{(IPC/mm\(^2\))} &  & \textbf{(IPC/mm\(^2\))} \\
\hline
1  & 0.757841 & 0.239596 & 0.316156 & 0.244910 & 0.323168 \\
2  & 0.769663 & 0.250319 & 0.325232 & 0.251317 & 0.326529 \\
4  & 0.761386 & 0.260730 & 0.342441 & 0.264360 & 0.347209 \\
8  & 0.775283 & 0.280289 & 0.361531 & 0.293105 & 0.378062 \\
16 & 0.788329 & 0.286805 & 0.363814 & 0.294579 & 0.373675 \\
\hline
\end{tabular}
\end{table}

\paragraph{Résultats -- Cortex A15.}
\begin{table}[H]
\centering
\scriptsize
\caption{Q9 -- A15 : IPC et efficacité surfacique (Dijkstra/Blowfish).}
\begin{tabular}{|c|c|c|c|c|c|}
\hline
\textbf{L1} & \(\mathbf{A_{\text{tot}}^{(28)}}\) & \(\mathbf{IPC_{Dij}}\) & \(\mathbf{SE_{Dij}}\) & \(\mathbf{IPC_{Bf}}\) & \(\mathbf{SE_{Bf}}\) \\
\textbf{(KB)} & \textbf{(mm\(^2\))} &  & \textbf{(IPC/mm\(^2\))} &  & \textbf{(IPC/mm\(^2\))} \\
\hline
2  & 2.267949 & 0.654431 & 0.288556 & 1.045684 & 0.461070 \\
4  & 2.257730 & 0.714325 & 0.316391 & 1.129990 & 0.500498 \\
8  & 2.273987 & 0.878416 & 0.386289 & 1.415052 & 0.622278 \\
16 & 2.276843 & 0.947300 & 0.416059 & 1.446239 & 0.635195 \\
32 & 2.319914 & 1.056581 & 0.455440 & 1.576089 & 0.679374 \\
\hline
\end{tabular}
\end{table}

\paragraph{Graphes Q9.}
\begin{figure}[H]
\centering
\includegraphics[width=0.95\linewidth]{../results/q9_surface/figures/q9_dijkstra_se_vs_l1.png}
\caption{Q9 -- Efficacité surfacique de Dijkstra en fonction de la taille L1.}
\end{figure}

\begin{figure}[H]
\centering
\includegraphics[width=0.95\linewidth]{../results/q9_surface/figures/q9_blowfish_se_vs_l1.png}
\caption{Q9 -- Efficacité surfacique de Blowfish en fonction de la taille L1.}
\end{figure}

\paragraph{Analyse.}
Pour A15, l'efficacité surfacique augmente avec L1 pour les deux applications, et le meilleur point observé
est \(32\ \text{KB}\) (Dijkstra : \(0.455440\), Blowfish : \(0.679374\) IPC/mm\(^2\)).
Pour A7, Dijkstra atteint son maximum à \(16\ \text{KB}\) (\(0.363814\) IPC/mm\(^2\)), tandis que Blowfish
atteint son maximum à \(8\ \text{KB}\) (\(0.378062\) IPC/mm\(^2\)) puis se tasse légèrement à \(16\ \text{KB}\).
Globalement, les gains de performance liés à l'augmentation de L1 compensent le surcoût en surface sur la plage testée,
avec un point de rendement décroissant plus tôt sur A7.
